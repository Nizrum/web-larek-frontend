# Web-Ларёк
Интернет-магазин с товарами для веб-разработчиков. В нём можно посмотреть каталог товаров, добавить товары в корзину и сделать заказ.

## Используемый стек:
HTML, SCSS, TypeScript, Webpack

## Инструкция по сборке и запуску
После клонирования проекта установить зависимости:
```
npm install
```
Для запуска проекта в режиме разработки выполнить команду:
```
npm run start
```
и открыть в браузере страницу по адресу http://localhost:8080

Для сборки проекта в продакшен выполнить команду:
```
npm run build
```

## Базовые классы

### Класс EventEmitter.
Класс EventEmitter реализует паттерн «Observer/Наблюдатель» и обеспечивает работу событий, его методы позволяют устанавливать и снимать слушатели событий, вызвать слушатели при возникновении события.
#### Методы:
- on: для подписки на событие.
- off: для отписки от события.
- emit: уведомления подписчиков о наступлении события соответственно.
- onAll: для подписки на все события.
- offAll: сброса всех подписчиков.
- trigger: генерирует заданное событие с заданными аргументами. Это позволяет передавать его в качестве обработчика события в другие классы. Эти классы будут генерировать события, не будучи при этом напрямую зависимыми от класса EventEmitter.

### Класс Api
Класс Api предоставляет методы для взаимодействия с REST API, выполняя HTTP-запросы и обрабатывая ответы.
#### Свойства:
- baseUrl: Базовый URL для всех запросов.
- options: Настройки заголовков и параметров для каждого запроса.
#### Методы:
- handleResponse: Обрабатывает ответ сервера, преобразуя его в JSON или отклоняя промис при ошибке.
- get: Выполняет GET-запрос к указанному URI.
- post: Выполняет POST, PUT или DELETE-запрос с переданными данными.

## Компоненты модели данных

### Класс ApiModel
Класс ApiModel представляет модель данных для работы с API интернет-магазина. Он реализует интерфейс IApiModel и предоставляет методы для получения списка товаров и отправки заказа.
#### Свойства:
- resourcesUrl: URL для доступа к ресурсам (например, изображениям).
- items: Массив товаров, полученных из API.
#### Методы:
- fetchProducts: Загружает список товаров из API и возвращает их с обработанными ссылками на изображения.
- getOrderResult: Отправляет заказ на сервер и возвращает результат обработки заказа.

### Класс CartModel
Класс CartModel представляет модель корзины интернет-магазина. Он реализует интерфейс ICartModel и предоставляет методы для управления товарами в корзине, таких как добавление, удаление и очистка.
#### Свойства:
- cartProducts: Массив товаров в корзине.
#### Методы:
- getAmount: Возвращает количество товаров в корзине.
- getTotalCost: Вычисляет и возвращает общую стоимость товаров в корзине.
- addToCart: Добавляет товар в корзину.
- deleteFromCart: Удаляет товар из корзины.
- clearCart: Очищает корзину, удаляя все товары.

### Класс FormModel
Класс FormModel представляет модель для работы с формой заказа. Он реализует интерфейс IFormModel и предоставляет методы для установки данных заказа, их валидации и получения информации о заказе.
#### Свойства:
- payment: Способ оплаты.
- email: Электронная почта клиента.
- phone: Телефон клиента.
- address: Адрес доставки.
- total: Общая стоимость заказа.
- items: Массив товаров в заказе.
- formErrors: Объект с ошибками валидации формы.
#### Методы:
- setOrderData: Устанавливает значение для указанного поля формы и проверяет его валидность.
- validateOrder: Проверяет валидность данных формы для указанного поля и обновляет список ошибок.
- getOrderData: Возвращает объект с данными заказа для отправки на сервер.

### Класс ProductListModel
Класс ProductListModel представляет модель для работы со списком товаров и отображением детальной карточки товара. Реализует интерфейс IProductListModel.
#### Свойства:
- productCards: Массив товаров в каталоге.
- selectedСard: Выбранная карточка товара для отображения.
#### Методы:
- showCard: Устанавливает выбранную карточку товара и отправляет событие для её отображения.
- get / set productCards: Геттер и сеттер для массива товаров, при изменении которого отправляется событие обновления списка.

## Компоненты представления

### Класс CardView
Класс CardView представляет компонент для отображения карточки товара. Он реализует интерфейс ICardView и предоставляет методы для рендеринга данных товара в HTML-элемент.
#### Методы:
- Конструктор: Инициализирует базовые элементы карточки товара.
- render: Отображает данные товара в карточке и возвращает готовый HTML-элемент.
- getPriceText: Преобразует значение цены в текстовое представление (например, "Бесценно" или "X синапсов").

### Класс CardModalView
Класс CardModalView представляет компонент для отображения модального окна с детальной информацией о товаре. Он расширяет функциональность базового класса CardView и реализует интерфейс ICardModalView, добавляя возможность отображения описания товара и кнопки для добавления его в корзину.
#### Методы:
- Конструктор: Инициализирует базовые элементы карточки товара и добавляет обработчик события для кнопки "Добавить в корзину", который отправляет соответствующее событие.
- render: Отображает подробную информацию о товаре, включая его описание, и настраивает состояние кнопки "Добавить в корзину" в зависимости от наличия цены.

### Класс CardListView
Класс CardListView представляет компонент для отображения списка карточек товаров. Он реализует интерфейс ICardListView и использует класс CardView для рендеринга каждой карточки.
#### Методы:
- render: Отображает список товаров, создавая для каждого товара карточку с помощью класса CardView и добавляя её в корневой элемент каталога.

### Класс ModalView
Класс ModalView представляет компонент для работы с модальными окнами. Он реализует интерфейс IModalView и предоставляет методы для открытия, закрытия и управления содержимым модального окна.
#### Методы:
- open: Открывает модальное окно, добавляя класс активности и отправляя соответствующее событие.
- close: Закрывает модальное окно, удаляя класс активности, очищая его содержимое и отправляя событие закрытия.
- set content: Устанавливает новое содержимое модального окна, заменяя текущее.
- lock: Блокирует или разблокирует прокрутку страницы в зависимости от переданного значения.

### Класс CartItemView
Класс CartItemView представляет компонент для отображения отдельного товара в корзине. Он реализует интерфейс ICartItemView и предоставляет методы для рендеринга данных товара в виде элемента корзины.
#### Методы:
- getPriceText: Преобразует значение цены в текстовое представление (например, "Бесценно" или "X синапсов").
- render: Отображает данные товара в корзине, включая его номер, название и цену, и возвращает готовый HTML-элемент.

### Класс CartView
Класс CartView представляет компонент для отображения корзины с товарами. Он реализует интерфейс ICartView и предоставляет методы для рендеринга списка товаров, общей стоимости, а также взаимодействия с кнопками корзины.
#### Методы:
- renderItems: Рендерит список товаров в корзине, создавая для каждого товара компонент CartItemView. Если корзина пуста, отображает соответствующее сообщение.
- renderHeaderCartCounter: Обновляет значение счетчика товаров в корзине в шапке сайта.
- renderTotalCost: Отображает общую стоимость товаров в корзине.
- render: Возвращает готовый HTML-элемент корзины.

### Класс OrderFormView
Класс OrderFormView представляет компонент для отображения формы ввода адреса и выбора метода оплаты. Он реализует интерфейс IOrderFormView и предоставляет методы для управления формой, включая обработку ошибок и отправку данных.
#### Методы:
- Конструктор: Инициализирует форму, добавляет обработчики событий для выбора способа оплаты, ввода данных и отправки формы. Отправляет события при изменении данных и выборе способа оплаты.
- selectPaymentMethod: Выбирает указанный способ оплаты, добавляя соответствующий класс активности к кнопке и удаляя его у остальных кнопок.
- toggleButtonDisability: Включает или отключает кнопку отправки формы в зависимости от переданного значения.
- render: Возвращает готовый HTML-элемент формы заказа.

### Класс ContactsFormView
Класс ContactsFormView представляет компонент для отображения формы контактов при оформлении заказа. Он реализует интерфейс IContactsFormView и предоставляет методы для управления формой, включая обработку ввода данных и отправку формы.
#### Методы:
- Конструктор: Инициализирует форму, добавляет обработчики событий для каждого поля ввода и события отправки формы. Отправляет события при изменении данных контактов.
- toggleButtonDisability: Включает или отключает кнопку отправки формы в зависимости от переданного значения.
- render: Возвращает готовый HTML-элемент формы контактов.

### Класс SuccessfulOrderView
Класс SuccessfulOrderView представляет компонент для отображения модального окна с успешным оформлением заказа. Он реализует интерфейс ISuccessfulOrderView и предоставляет методы для настройки содержимого модального окна.
Методы:
- Конструктор: Инициализирует модальное окно, добавляет обработчик события для кнопки закрытия, который отправляет событие при нажатии на кнопку.
- render: Настраивает текст описания с общей суммой заказа и возвращает готовый HTML-элемент модального окна.

## Ключевые типы данных

### IProductItem
Описывает структуру товара в каталоге.
- id: Уникальный идентификатор товара.
- description: Описание товара.
- image: URL изображения товара.
- title: Название товара.
- category: Категория товара (например, "софт-скил", "хард-скил").
- price: Цена товара (может быть null для товаров без цены).

### IShippingDetails
Описывает информацию о доставке заказа.
- payment: Выбранный способ оплаты.
- address: Адрес доставки.

### IContacts
Описывает контактную информацию клиента.
- phone: Телефон клиента.
- email: Электронная почта клиента.

### IOrder
Описывает структуру заказа, объединяя информацию о доставке, контактах и содержимом корзины.
Расширяется интерфейсами IShippingDetails и IContacts .
- items: Массив идентификаторов товаров в заказе.
- total: Общая стоимость заказа.

### IOrderResult
Описывает результат обработки заказа на сервере.
- id: Уникальный идентификатор заказа.
- total: Общая стоимость заказа.

### FormErrors
Описывает возможные ошибки валидации формы заказа. Является частичной записью (Partial<Record<keyof IOrder, string>>), где ключи соответствуют полям интерфейса IOrder , а значения — сообщения об ошибках.